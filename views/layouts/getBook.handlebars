{{> header}}

<h1>book</h1>
<ul>
	<h3>{{book.name}}</h3>
        <h3>{{book.user.author}}</h3>

    <h3>{{book.category.category}}</h3>
        <h3>{{book.rate}}</h3>
                <h3>{{book.raters}} ratings</h3>
                                <h3>{{state.status}} </h3>
                                {{!-- <img src={{book.photo}}> --}}
                                <div>
                                    <h1>reviews</h1>
                                       {{#each review}}
                                            <li>{{this.user.firstName}} {{this.user.lastName}} : {{this.review}}</li>

                                          

                                                {{/each}}
                             </div>





</ul>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript">
        $(document).ready(function () {
            $('#suggestion_form').keyup(function () {
                $form = $(this)
                var formData = new FormData(this);
                var text=$("#suggestion").val()
                var query = $(this).val();
                $.ajax({
                    url: "/books/search?word="+text,
                    type: 'GET',
                    
                    success: function (data) {
                        console.log("SUCCESS");
                        
                        $("#searchbox").css("display", "block");
                        $("#searchbox").empty()
                        for (i in data["book"]) {
                            $('#searchbox').append('<li class="list-group-item" ><a id="' +
                                i + '" href="/books/' + data["book"][i]._id+'">' + data["book"][i].name + '</a></li>');
                            $('#' + i + '').click();
                        }
                    },
                    failure: function (data) {
                        console.log("FAIL");
                        console.log(data);
                    },
                    cache: false,
                    contentType: false,
                    processData: false
                });
            });
        });
    </script>
              {{> footer}}

